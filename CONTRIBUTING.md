# Contributing to gh-discussion-export

Thank you for your interest in contributing! This document provides guidelines for contributing to the project.

## OpenSpec-Driven Development

This project follows the [OpenSpec methodology][openspec] &mdash; a specification-first approach where all changes are designed and documented before implementation.

The specification is located in [`openspec/specs`](openspec/specs) and includes detailed requirements, design decisions, and implementation tasks for each modular change.

When contributing, please follow this workflow:

1. Check the existing specifications in `openspec/specs`.
2. For new features or significant changes, consider creating an OpenSpec change proposal first.
3. Ensure implementation matches the documented requirements.
4. Keep specifications in sync with code changes.

When submitting a pull request (PR), include the OpenSpec change proposal. Once the PR is approved, archive the change proposal as per OpenSpec guidelines, then push the changes to the existing PR, so that you don't need to create a new PR for archiving.

## AI-Generated Code

We welcome contributions that leverage AI assistance (such as Claude, GitHub Copilot, ChatGPT, etc.). Contributors are **not required** to disclose whether code was generated by AI tools.

However, by submitting code to this project, contributors:

- **Take full responsibility** for the submitted code's quality, security, and correctness
- **Must ensure** the code complies with this project's licensing and contribution guidelines
- **Should verify** that AI-generated code is thoroughly tested and reviewed before submission

All contributions, whether AI-assisted or manually written, are subject to the same review standards and must pass tests, formatting checks, and linting.

## Development Setup

### Prerequisites

- **Rust toolchain** (latest stable): Install from [rustup.rs](https://rustup.rs/)
- **OpenSpec CLI** Install from [openspec]
- **GitHub CLI** (`gh`): Install from [cli.github.com](https://cli.github.com/)
- **GitHub authentication**: Run `gh auth login`

[openspec]: https://openspec.dev/

### Clone and Build

```bash
# Clone the repository
git clone https://github.com/tatsuya6502/gh-discussion-export.git
cd gh-discussion-export

# Build the project
cargo build --release

# The binary will be at target/release/gh-discussion-export
```

## Running Tests

### Unit Tests

```bash
cargo test
```

Unit tests are fast and don't require GitHub authentication.

### Integration Tests

```bash
cargo test -- --ignored
```

Integration tests run against the real GitHub API and require:
- GitHub CLI installed and authenticated (`gh auth login`)
- Network connectivity
- Rate limit considerations (GitHub GraphQL API limit: 5000 points/hour)

## Code Style

This project uses standard Rust tooling:

### Formatting

```bash
cargo fmt --all
```

All code should be formatted before committing.

### Linting

```bash
cargo clippy --lib --tests --all-features --all-targets
```

Address any clippy warnings before submitting a pull request. Some warnings about unused code are expected during development.

## Development Workflow

### 1. Create a Branch

```bash
git checkout -b feature/your-feature-name
# or
git checkout -b fix/your-bug-fix
```

### 2. Make Changes

- Write clear, concise code
- Add tests for new functionality
- Ensure all tests pass: `cargo test`
- Format code: `cargo fmt --all`
- Run clippy: `cargo clippy --lib --tests --all-features --all-targets`

### 3. Commit Changes

```bash
git add .
git commit -m "Descriptive commit message"
```

### 4. Push and Create Pull Request

```bash
git push origin feature/your-feature-name
```

Then create a pull request on GitHub.

## Pull Request Guidelines

- **Title**: Use a clear, descriptive title (e.g., "Add support for custom output paths")
- **Description**: Explain what you changed and why
- **Tests**: Ensure all tests pass
- **Documentation**: Update README.md if user-facing behavior changes
- **Commits**: Keep commits focused and atomic

## Testing Tips

- Use `#[ignore]` for heavy integration tests to avoid running them on every `cargo test`.
- Mock the GitHub client for unit tests where possible.
- Test pagination logic thoroughly (discussions can have many comments/replies).
- Test edge cases: deleted users, empty discussions, malformed responses.

## Getting Help

- Open an issue for bugs or feature requests.
- Start a discussion for questions or ideas.
- Check existing issues and PRs before creating new ones.

Thank you for contributing!
